====== Пакет I18N - интернационализация и работа с мультибайтным контентом. ======
Пакет i18n предоставляет средства для интернационализации приложений. Помимо этого он предоставляет средства для [[limb3:ru:packages:i18n:charset|работы с UTF-строками]].

===== Основные понятия =====
  * **Локаль** - это набор параметров, включая набор символов, язык пользователя, страну, часовой пояс, а также другие предустановки, которые пользователь ожидает видеть в пользовательском интерфейсе. При установке и получения локали используется идентификатор по стандарту [[http://tools.ietf.org/html/rfc3066|RFC3066]] (например, ru_RU). В объектной форме она представленна объектом lmbLocale.
  * **Словарь** - набор сообщений и их переводов, для определенной локали и домена. Обычно располагается в папке i18n/translations.
  * **Сообщение** - строка, которую следует перевести
  * **Домен** - представляет из себя "кусок" предметной области, к которому относится то или иное сообщение. Домен состоит из одного слова, и, например, для Qt словарей указывает на то, как будет выглядеть название словаря. Так, домен “foo” и текущая локаль “en_US” для Qt словарей замапятся на файл i18/translations/foo.en_US.ts. Для каждого пакета Limb зарезервирован отделььный домен, с тем же названием, что и пакет. Домен по-умолчанию - “default”. Подразумевается, что словари из этого домена будут использоваться в конечном приложении.
  * **Бэкэнд** - формат хранения словаря. В данный момент поддерживаются только словари для [[.i18n:qt_dictionary|Qt Linguist]].

===== Добавление локализации в свой проект =====
 1. Создаем в проекте директорию i18n/translations
 
 2. Копируем в нее файлы *.ts из пакетов, в которые предполагается вносить изменения, касающиеся локализации (validation.en_US.ts, validation.ru_RU.ts, cms.en_US.ts, cms.ru_RU.ts)

 3. Выполняем обновление словаря (словарь создасться автоматически):
<code>limb.php i18n_init -D locale=ru_RU -D scan=dir/to/scan [-D domain=default]</code>
 
 4. Очищаем кэш, обновляем страницу

===== Использование локализации =====

1) В PHP коде:

<code php>
lmb_i18n("Hello {arg}", array('arg' => 'Bob'), "domain1");
lmb_i18n("Hello", "domain2");
lmb_i18n("Hello"); // 'default' domain
</code>

2) В Macro-шаблонах:
<code php>
{{i18n text="Hello" domain="domain1"/}}
{{i18n text="Hello"/}} //'default' domain
{$string|i18n_capitalize}
{$string|i18n_clip:4,5,"..."}
{$datetime|i18n_date:"en_US", "string", "", "%Y %m %d"}
</code>
[[.i18n:tags_and_filters|Подробнее про MACRO теги и фильтры пакета I18N.]]

===== Установка текущей локали =====
Для установки текщуей локали используется lmbI18nTools::setLocale():
<code php>
lmbToolkit::instance()->setLocale('ru_RU');
</code>
Рекомендуем устанавливать текущую локаль с файле //setup.php// проекта.





