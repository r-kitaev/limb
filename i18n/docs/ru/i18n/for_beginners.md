## Добавление локализации в свой проект
1) В проекте создаем директорию i18n/translations

2) Копируем в нее файлы *.ts из пакетов, в которые предполагается вносить изменения, касающиеся локализации (validation.en_US.ts, validation.ru_RU.ts, cms.en_US.ts, cms.ru_RU.ts)

3) Создаем файлы (НАЗВАНИЕ_ПРОЕКТА.ru_RU.ts, НАЗВАНИЕ_ПРОЕКТА.en_US.ts) со следующим содержанием:

    <?xml version=«1.0» encoding=«utf-8»?> <TS> <context> </context> </TS>

4) Выполняем команду (обновление словарей):

    limb i18n ut

5) Очищаем кэш, обновляем страницу

## Локализация

1) В PHP коде

    lmb_i18n(«Hello {arg}», array('arg' ⇒ 'Bob'), «domain»)

2) В шаблоне

    {$»Search query»|i18n:«project_name»}

## Изменения в пакете i18n (перенесено с форума)
1) Изменился способ хранения Qt словарей, теперь эти словари хранятся в директории i18n/translations и имеют вид $domain.$locale.ts, например, validation.en_US.ts. Больше нет такого понятия как «оригинальный» словарь, по-умолчанию просто используется default.en_US.ts.

2) Больше нет понятия «контекста» для словарей вида /foo/bar, теперь есть более общее понятие «домена»(понятие домена взято из терминологии gettext). Вообще это сделано для того, чтобы обобщить работу с разного вида словарями(см.ниже), хотя пока есть только Qt поддержка.

   Домен состоит из одного слова, и, например, для Qt словарей указывает на то, как будет выглядеть название словаря. Так, домен «foo» и текущая локаль «en_US» для Qt словарей замапятся на файл i18/translations/foo.en_US.ts.

3) Больше нет функции tr(..), ей на смену пришла функция ($txt) с двумя опциональными аргументами. Вот ее возможное использование:
   
   * («Hello») — используется домент по-умолчанию «default» 
   * («Hello», «domain») — явно используется домен «domain» 
   * («Hello {arg}», array('arg' ⇒ 'Bob')) — параметры + домент по-умолчанию «default» 
   * («Hello {arg}», array('arg' ⇒ 'Bob'), «domain») — параметры + домент «domain» 

Update: вместо функции () теперь используется lmb_i18n()

4) Для себя мы делаем следующее соглашение (чисто условное): Limb3 пакет содержит переводы в домене, совпадающем с ним по названию. Например, validation словарь должен находиться в пакете VALIDATION. Сейчас это соглашение не выполняется, например, для WEB_APP пакета, но это будет исправлено.

5) Домен по-умолчанию — «default». Подразумевается, что словари из этого домена будут использоваться в конечном приложении. В пакетах Limb3, мы опять же уславливаемся, не должно быть непереведенных строк в данном домене.

6) Поиск словарей Qt происходит следующим образом: 
   * вначале поиск происходит в приложении 
   * затем поиск происходит по пакетам Limb3
   
Вообще за это отвечает константа:

    @define('LIMB_TRANSLATIONS_INCLUDE_PATH', 'i18n/translations;limb/*/i18n/translations');

Таким образом в приложении можно будет оверрайдить Limb3 словари, хотя большого смысла в этом я не вижу.

7) Фильтр i18n для шаблонов остался тем же, однако пока он находится в WEB_APP, но будет перенесен в пакет I18N, т.к на самом деле его место там. Это ничего не должно сломать.

8) Теоретически можно будет иметь любое количество реализаций хранилищ(backend) для словарей, пока же реально есть только реализация хранения в Qt формате.

Самое главное, чтобы хранилище реализовывало интерфейс:

